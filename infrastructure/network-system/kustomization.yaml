apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - namespace.yaml
  - cert-manager/helm-release.yaml
  - clusterissuer/helm-release.yaml
  - metallb/helm-release.yaml
  - traefik/helm-release.yaml
  - reflector/helm-release.yaml
secretGenerator:
  - name: s3-credentials-secret-values
    namespace: ${main_namespace}
    files:
      - values.yaml=../../shared/s3-credentials-values.sops.yaml
  - name: clusterissuer-secret-values
    namespace: ${main_namespace}
    files:
      - values.yaml=clusterissuer/secret-values.sops.yaml
  - name: traefik-secret-values
    namespace: ${main_namespace}
    files:
      - values.yaml=traefik/secret-values.sops.yaml
configurations:
  - kustomizeconfig.yaml
