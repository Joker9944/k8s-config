---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: alloy

resources:
  - manifests/namespace.yaml
  - flux/helm-repository.yaml
  - flux/helm-release.yaml

components:
  - ../../../components/common-kustomizeconfig

configMapGenerator:

  - name: alloy-config
    files:
      - config.alloy=files/config.alloy
    options:
      disableNameSuffixHash: true # https://grafana.com/docs/alloy/latest/configure/kubernetes/#kustomize-considerations
